(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},104:function(e,t,a){},127:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),c=a(32),o=a(13),s=(a(81),a(9)),l=a(10),u=a(14),m=a(11),d=a(15),h=(a(83),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.display;return r.a.createElement("div",{className:"cssload-container",style:{display:e?"block":"none"}},r.a.createElement("div",{className:"cssload-arc"},r.a.createElement("div",{className:"cssload-arc-cube"})))}}]),t}(n.Component)),p=Object(o.b)(function(e){return{display:e.preloader.display}},function(e){return{}})(h),f=a(16),g=a(131),y=a(130),b=(a(85),{preloader:{display:!0},select:{cityList:a(63),selectedCity:"706483"},currentWeatherData:null,forecastWeatherData:null,weatherIcon:{imgLoaded:!1,frames:[3,6],imgList:[{name:"01d",position:[0,2]},{name:"01n",position:[0,3]},{name:"02d",position:[0,4]},{name:"02n",position:[0,5]},{name:"03d",position:[0,0]},{name:"03n",position:[0,1]},{name:"04d",position:[1,0]},{name:"04n",position:[1,1]},{name:"09d",position:[1,2]},{name:"09n",position:[1,3]},{name:"10d",position:[1,4]},{name:"10n",position:[1,5]},{name:"11d",position:[2,5]},{name:"11n",position:[2,0]},{name:"13d",position:[2,1]},{name:"13n",position:[2,2]},{name:"50d",position:[2,3]},{name:"50n",position:[2,4]}]},defaultSettings:{units:"metric",lang:"ru",appId:"a0416a16e90dab631a9188513a26d825",host:"https://api.openweathermap.org/data/2.5/"},error:!1});function v(){return{type:"preloaderDisplay",display:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}function w(e){return{type:"setCurrentWeather",data:e}}function E(e){return{type:"setForecastWeather",data:e}}var j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).cityList=a.props.state.cityList,a.state={cityName:""},a.handleChange=function(e){a.props.changeCity(e),a.props.loadWeather(e)},a.getCityName=function(e){a.cityList.forEach(function(t){t.id===e&&a.setState(Object(f.a)({},a.state,{cityName:t.name}))})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.loadWeather(this.props.selected),this.getCityName(this.props.selected)}},{key:"componentWillReceiveProps",value:function(e){this.getCityName(e.selected)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"select-wrapper pl-3 pr-3"},r.a.createElement(g.a,{title:this.state.cityName},this.cityList.map(function(t){return r.a.createElement(y.a.Item,{eventKey:t.id,key:t.id,onSelect:e.handleChange},t.name)})))}}]),t}(n.Component),O=Object(o.b)(function(e){return{state:e.select,selected:e.select.selectedCity}},function(e){return{changeCity:function(t){e({type:"changeCity",cityId:t})},loadWeather:function(t){e(function(e){var t=b.defaultSettings;return e=Object(f.a)({},t,e),function(t){function a(e,a){return fetch(e).then(function(e){return e.json()}).then(function(e){return t(a(e))}).catch(function(e){console.warn("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435",e),t(function(){return{type:"error",error:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}(!0))})}var n=a("".concat(e.host,"weather?APPID=").concat(e.appId,"&id=").concat(e.cityId,"&units=").concat(e.units,"&lang=").concat(e.lang),w),r=a("".concat(e.host,"forecast?APPID=").concat(e.appId,"&id=").concat(e.cityId,"&units=").concat(e.units,"&lang=").concat(e.lang),E);Promise.all([n,r]).then(function(){B.getState().weatherIcon.imgLoaded&&t(v(!1))})}}({cityId:t}))}}})(j),L=a(38),N=a.n(L),D=(a(100),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).setContext=function(e){a.ctx||(a.ctx=e.getContext("2d")),a.setIcon()},a.setIcon=function(){var e,t;a.state.imgLoaded&&(a.width=a.state.width/a.frames[0],a.height=a.state.height/a.frames[1],a.imgList.forEach(function(n){n.name===a.props.imgData.icon&&(e=a.width*n.position[0],t=a.height*n.position[1])}),a.ctx.clearRect(0,0,a.width,a.height),a.ctx.drawImage(a.img,e,t,a.width,a.height,0,0,a.width,a.height))},a.img=new Image,a.img.src=N.a,a.imgList=a.props.imgSettings.imgList,a.frames=a.props.imgSettings.frames,a.width=0,a.height=0,a.ctx=null,a.state={imgLoaded:a.props.imgSettings.imgLoaded,width:a.props.imgSettings.width||0,height:a.props.imgSettings.height||0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.setIcon()}},{key:"componentWillReceiveProps",value:function(e){var t=e.imgSettings,a=t.imgLoaded,n=t.width,r=t.height;this.setState({imgLoaded:a,width:n,height:r})}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.setContext,"data-img":this.state.imgLoaded,width:this.state.width/this.frames[0],height:this.state.height/this.frames[1],title:this.props.imgData.description})}}]),t}(n.Component)),C=Object(o.b)(function(e){return{imgSettings:e.weatherIcon}},function(e){return{}})(D),k=(a(102),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).getFormatDate=function(e){return e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data;if(!e)return r.a.createElement("div",null,"loading...");var t=new Date(1e3*e.sys.sunset),a=new Date(1e3*e.sys.sunrise);return r.a.createElement("div",{className:"card-text current-weather d-flex flex-column flex-sm-row justify-content-around"},r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement("div",{className:"temp d-flex align-self-center"},Math.round(e.main.temp),"\xb0C"),r.a.createElement("div",{className:"weather-icon d-flex align-self-center"},r.a.createElement(C,{imgData:e.weather[0]}))),r.a.createElement("div",{className:"align-self-center"},r.a.createElement("div",{className:"suntime"},r.a.createElement("div",{className:"sunrise"},"\u0412\u043e\u0441\u0445\u043e\u0434: ",this.getFormatDate(a)),r.a.createElement("div",{className:"sunset"},"\u0417\u0430\u043a\u0430\u0442: ",this.getFormatDate(t))),r.a.createElement("div",{className:"humidity"},"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c: ",e.main.humidity,"%")))}}]),t}(n.Component)),x=Object(o.b)(function(e){return{data:e.currentWeatherData}},function(e){return{}})(k),I=a(67),S=a.n(I),W=a(68),M=a.n(W),P=a(69),F=a.n(P),T=(a(104),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).contentList=[],a.state={activeKey:Object.keys(a.contentList)[0]},a.tabHeaderTemplate=function(e){var t=parseInt(e)+60*(new Date).getTimezoneOffset();return console.log(e),console.log(new Date(t).getDate()),[r.a.createElement("div",{className:"text-center",key:"weekday"},new Date(t).toLocaleString("ru-Ru",{weekday:"short"})),r.a.createElement("div",{className:"text-center",key:"day"},new Date(t).getDate()),r.a.createElement("div",{className:"text-center",key:"month"},new Date(t).toLocaleString("ru-Ru",{month:"long"}))]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"createContentList",value:function(e){var t,a=this;this.contentList=[],e.list.reduce(function(e,n){var r=1e3*n.dt,i=new Date(r);return e&&e.getUTCDate()===i.getUTCDate()||(t=r,a.contentList[t]=[]),a.contentList[t].push(n),i},null)}},{key:"render",value:function(){var e=this,t=this.props.data;return t?(this.createContentList(t),r.a.createElement(S.a,{id:"controlled-tab",activeKey:this.state.activeKey,onSelect:function(t){return e.setState({key:t})}},Object.keys(this.contentList).map(function(t){return r.a.createElement(M.a,{eventKey:t,key:t,title:e.tabHeaderTemplate(t)},r.a.createElement(F.a,{hover:!0,className:"border"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u0412\u0440\u0435\u043c\u044f"),r.a.createElement("th",null,"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"),r.a.createElement("th",null,"\u041e\u0441\u0430\u0434\u043a\u0438"),r.a.createElement("th",null,"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("th",null,"\u041e\u0431\u043b\u0430\u0447\u043d\u043e\u0441\u0442\u044c"),r.a.createElement("th",null,"\u0412\u0435\u0442\u0435\u0440"))),r.a.createElement("tbody",null,e.contentList[t].map(function(e){return r.a.createElement("tr",{key:e.dt},r.a.createElement("th",{className:"time"},new Date(1e3*e.dt).getUTCHours(),":00"),r.a.createElement("th",null,Math.round(e.main.temp),"\xb0C"),r.a.createElement("th",null,r.a.createElement(C,{imgData:e.weather[0]})),r.a.createElement("th",null,e.main.humidity,"%"),r.a.createElement("th",null,e.clouds.all,"%"),r.a.createElement("th",null,r.a.createElement("span",{className:"arrow-wind",style:{transform:"rotate("+Math.ceil(e.wind.deg)+"deg)",display:"inline-block"}},"\u2193"),Math.round(e.wind.speed)," \u043c/\u0441"))}))))}))):r.a.createElement("div",null,"loading...")}}]),t}(n.Component)),A=Object(o.b)(function(e){return{data:e.forecastWeatherData}},function(e){return{}})(T),H=a(132),K=(a(127),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"error-wrap",style:{display:this.props.error?"block":"none"}},r.a.createElement(H.a,{variant:"danger",className:"error"},r.a.createElement(H.a.Heading,{className:"text-center"},"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e!"),r.a.createElement("p",{className:"error-page text-center"},"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430 \u043f\u043e\u0437\u0436\u0435.")))}}]),t}(n.Component)),R=Object(o.b)(function(e){return{error:e.error}},function(e){return{}})(K),U=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(p,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"weather-content"},r.a.createElement("div",{className:"card text-white bg-primary mt-3 pb-3"},r.a.createElement("div",{className:"d-flex flex-sm-row flex-column justify-content-center mt-3 mb-3"},r.a.createElement("h5",{className:"card-title text-center"},"\u041f\u043e\u0433\u043e\u0434\u0430 \u0432 \u0433\u043e\u0440\u043e\u0434\u0430\u0445 \u0423\u043a\u0440\u0430\u0438\u043d\u044b"),r.a.createElement(O,null)),r.a.createElement(x,null)),r.a.createElement("div",{id:"forecast-weather",className:"mt-3"},r.a.createElement(A,null)))),r.a.createElement(R,null))}}]),t}(n.Component);var J=a(70),z=Object(c.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"preloaderDisplay":return Object(f.a)({},e,{preloader:Object(f.a)({},e.preloader,{display:t.display})});case"changeCity":return Object(f.a)({},e,{select:Object(f.a)({},e.select,{selectedCity:t.cityId})});case"setCurrentWeather":return Object(f.a)({},e,{currentWeatherData:t.data});case"setForecastWeather":return Object(f.a)({},e,{forecastWeatherData:t.data});case"imgLoaded":return Object(f.a)({},e,{weatherIcon:Object(f.a)({},e.weatherIcon,{imgLoaded:t.isLoaded,width:t.width,height:t.height})});case"error":return Object(f.a)({},e,{error:t.error});default:return e}},Object(c.a)(J.a)),B=t.default=z;z.dispatch(function(e){var t=new Image;t.src=N.a,t.addEventListener("load",function(){e(function(e){return{type:"imgLoaded",isLoaded:e,width:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,height:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}}(!0,t.width,t.height)),B.getState().currentWeatherData&&B.getState().forecastWeatherData&&e(v(!1))})}),Object(i.render)(r.a.createElement(o.a,{store:z},r.a.createElement(U,null)),document.getElementById("root"))},38:function(e,t,a){e.exports=a.p+"static/media/weatherIcons.c60201fe.png"},63:function(e){e.exports=[{name:"\u041a\u0438\u0435\u0432",id:"703448"},{name:"\u041f\u043e\u043b\u0442\u0430\u0432\u0430",id:"696643"},{name:"\u041c\u0430\u0440\u0438\u0443\u043f\u043e\u043b\u044c",id:"701822"},{name:"\u0425\u0430\u0440\u044c\u043a\u043e\u0432",id:"706483"},{name:"\u041b\u044c\u0432\u043e\u0432",id:"702550"},{name:"\u0414\u043d\u0435\u043f\u0440",id:"709930"},{name:"\u0422\u0435\u0440\u043d\u043e\u043f\u043e\u043b\u044c",id:"691650"},{name:"\u0427\u0435\u0440\u043d\u043e\u0432\u0446\u044b",id:"710719"},{name:"\u041d\u0438\u043a\u043e\u043b\u0430\u0435\u0432",id:"700568"}]},72:function(e,t,a){e.exports=a(129)},83:function(e,t,a){},85:function(e,t,a){}},[[72,2,1]]]);
//# sourceMappingURL=main.8e8692d2.chunk.js.map